# BodyLapse App Store申請ロードマップ

## 概要
このドキュメントは、BodyLapse iOSアプリをApp Storeに申請するための包括的なロードマップです。すべてのタスクは優先度と依存関係によって整理され、スムーズな申請プロセスを確保します。

## 🚨 申請前の重要タスク

### 1. AdMob本番環境セットアップ ⭐️ 最優先
**現在の状態**: アプリはテスト広告IDのみを使用  
**必要なアクション**:
1. https://admob.google.com でAdMobアカウントを作成/アクセス
2. AdMobダッシュボードで「BodyLapse」の新しいアプリを作成
3. 本番用広告ユニットIDを生成:
   - バナー広告ユニットID（カレンダー、比較、ギャラリービュー用）
   - インタースティシャル広告ユニットID（動画生成用）
4. `/Services/AdMobService.swift`を更新:
   - `"YOUR_PRODUCTION_BANNER_AD_UNIT_ID"`を実際のバナーIDに置換
   - `"YOUR_PRODUCTION_INTERSTITIAL_AD_UNIT_ID"`を実際のインタースティシャルIDに置換
5. Info.plistのAdMobアプリIDを更新:
   - テストID `ca-app-pub-3940256099942544~1458002511`を本番IDに置換
6. **重要**: 申請前に本番IDで十分にテストすること

### 2. アプリアイコン生成 ⭐️ 最優先
**現在の状態**: 1024x1024アイコンのみ存在  
**必要なアクション**:
1. 必要なすべてのiPhoneアイコンサイズを生成:
   - 20x20 (2x, 3x) - 通知アイコン
   - 29x29 (2x, 3x) - 設定アイコン
   - 40x40 (2x, 3x) - Spotlightアイコン
   - 60x60 (2x, 3x) - アプリアイコン
   - 1024x1024 - App Storeアイコン
2. `AppIcon.appiconset/Contents.json`からMac固有のアイコンエントリを削除
3. IconSet CreatorやBakeryなどのツールを使用してすべてのサイズを生成
4. Appleのデザインガイドラインに従う（透明度なし、角丸なし）

### 3. 起動画面作成 ⭐️ 最優先
**現在の状態**: 起動画面が存在しない  
**必要なアクション**:
1. Xcodeで`LaunchScreen.storyboard`を作成
2. デザインオプション:
   - アプリロゴを中央に配置したシンプルなデザイン
   - アプリのテーマに合った背景色
   - ローカライズが必要なテキストは避ける
3. プロジェクトに追加し、Target Settings > General > Launch Screenで設定
4. すべてのiPhoneサイズでテストし、適切にスケーリングされることを確認

### 4. プライバシーマニフェスト (PrivacyInfo.xcprivacy) ⭐️ 高優先度
**現在の状態**: 必要なプライバシーマニフェストが欠落  
**必要なアクション**:
1. Xcodeで`PrivacyInfo.xcprivacy`ファイルを作成（File > New > File > Resource > App Privacy）
2. API使用理由を宣言:
   - ファイルタイムスタンプAPI（写真メタデータ用）
   - ユーザーデフォルト（設定保存用）
   - フォトライブラリアクセス
   - カメラアクセス
3. 必要な理由コードについてはAppleのドキュメントを参照
4. Xcodeでアプリターゲットに追加

### 5. プライバシーポリシーの連絡先情報更新 ⭐️ 高優先度
**現在の状態**: プレースホルダーテキストを含む  
**必要なアクション**:
1. `privacy_policy.html`を編集:
   - `[Your Contact Email]`を実際のサポートメールに置換
   - `[Your Website URL]`を実際のウェブサイト/サポートURLに置換
   - 「最終更新日」を更新
2. App Store申請のためにプライバシーポリシーをオンラインでホスト
3. プライバシーポリシーURLがアクセス可能であることを確認

### 6. 利用規約の作成 ⭐️ 高優先度
**現在の状態**: 利用規約ドキュメントなし  
**必要なアクション**:
1. プライバシーポリシーテンプレートに基づいて`terms_of_service.html`を作成
2. 以下のセクションを含める:
   - サブスクリプション条件と自動更新
   - 利用規約
   - コンテンツの所有権
   - 責任の制限
   - キャンセルポリシー
3. プライバシーポリシーと共にオンラインでホスト
4. 設定ビューにリンクを追加

## 📱 App Store Connect設定

### 7. App Store Connectでアプリを作成
**必要なアクション**:
1. App Store Connectにログイン
2. バンドルID: `com.J.BodyLapse`で新しいアプリを作成
3. アプリ情報を入力:
   - アプリ名: "BodyLapse"
   - プライマリ言語: 英語
   - カテゴリ: ヘルスケア/フィットネス
   - セカンダリカテゴリ: 写真/ビデオ

### 8. アプリ内課金の設定
**参照**: `AppStoreConnect_Subscription_Setup.md`に従う  
**必要なアクション**:
1. サブスクリプショングループを作成: "BodyLapse Premium"
2. 自動更新サブスクリプションを作成:
   - プロダクトID: `com.J.BodyLapse.premium.monthly`
   - 価格: $4.99/月
   - 説明: "広告、ウォーターマークを削除し、体重を追跡"
3. サブスクリプションの特典とスクリーンショットを設定
4. レビューに提出

### 9. StoreKit設定の更新
**現在の状態**: プレースホルダー値を含む  
**必要なアクション**:
1. App Store Connectでアプリを作成後、`BodyLapse.storekit`を更新:
   - `_applicationInternalID: "0"`を実際のApp IDに置換
   - `_developerTeamID: "0"`をあなたのTeam IDに置換
2. App Store Connectと同期して設定を確認

## 🧹 コードクリーンアップタスク

### 10. デバッグ設定の削除
**必要なアクション**:
1. プロジェクトから`DebugSettingsView.swift`を削除
2. `SettingsView.swift`内で:
   - デバッグセクションを削除（`#if DEBUG`の行）
   - DebugSettingsViewのインポートと参照を削除
3. プロジェクト内の他の`#if DEBUG`ブロックを検索し、それぞれを評価:
   - デバッグ専用のテスト広告IDは保持（適切にゲートされている）
   - デバッグUI要素は削除
   - クラッシュレポートに役立つログは保持

### 11. 開発コードのクリーンアップ
**必要なアクション**:
1. 本番コードの`print()`文を削除またはコメントアウト
2. ハードコードされたテストデータが残っていないことを確認
3. すべてのTODOコメントが対処されているか削除されていることを確認
4. 未使用のフレームワークを削除（例：CLAUDE.mdに記載されているopencv2.framework）

## 📸 App Storeアセット

### 12. スクリーンショットの準備
**必要なサイズ**: 
- 6.7" (iPhone 15 Pro Max): 1290 x 2796
- 6.5" (iPhone 14 Plus): 1284 x 2778  
- 5.5" (iPhone 8 Plus): 1242 x 2208

**推奨スクリーンショット**:
1. オンボーディング/ウェルカム画面
2. ポーズガイドライン付きカメラビュー
3. 進捗を表示するカレンダービュー
4. タイムラプス動画生成
5. ビフォー/アフター比較ビュー

**ヒント**:
- サンプルデータでアプリの使用を表示
- プレミアム機能をハイライト
- プロフェッショナルな見た目のためにデバイスフレームを使用
- Sketch、Figma、Screenshot Creatorなどのツールの使用を検討

### 13. App Storeの説明文作成
**必要なセクション**:
1. **短い説明** (最大170文字):
   "毎日の写真でフィットネスの旅を追跡し、素晴らしい変身タイムラプス動画を作成"

2. **長い説明** (最大4000文字):
   - アプリの目的を紹介
   - 主要機能をリスト
   - プライバシーファーストアプローチを説明
   - プレミアム特典に言及
   - 行動喚起を含める

3. **キーワード** (最大100文字):
   "fitness,progress,body,transformation,time-lapse,weight,tracker,before,after,workout"

4. **新機能** (バージョン1.0用):
   "BodyLapseの初回リリース - あなたの個人的なフィットネス変身トラッカー"

## ✅ 最終テストチェックリスト

### 14. 申請前テスト
1. **機能テスト**:
   - [ ] 本番AdMob IDでテスト
   - [ ] サブスクリプション購入フローを確認
   - [ ] すべてのプレミアム機能が正しくロック解除されることをテスト
   - [ ] プレミアムユーザーに広告が表示されないことを確認
   - [ ] 最小iOSバージョン（17.0）でテスト

2. **デバイステスト**:
   - [ ] 様々なiPhoneモデルでテスト
   - [ ] 異なる向きでテスト
   - [ ] 異なる言語設定でテスト
   - [ ] 低ストレージ条件でテスト

3. **プライバシーと権限**:
   - [ ] 権限リクエストが正しく表示されることをテスト
   - [ ] 権限が拒否された場合でもアプリが動作することを確認
   - [ ] Face ID/Touch ID認証をテスト

4. **コンテンツテスト**:
   - [ ] プレースホルダーテキストが残っていないことを確認
   - [ ] すべての画像が正しく読み込まれることをチェック
   - [ ] 無料ユーザーにウォーターマークが表示されることを確認
   - [ ] 多数の写真での動画生成をテスト

## 📋 申請チェックリスト

### 15. 最終App Store Connect設定
- [ ] Xcode経由でビルドをアップロード
- [ ] すべてのアプリ情報フィールドを入力
- [ ] すべてのスクリーンショットをアップロード
- [ ] 価格設定（アプリ内課金付き無料）
- [ ] 年齢レーティングを設定（おそらく4+）
- [ ] プライバシーポリシーURLを追加
- [ ] サポートURLを追加
- [ ] マーケティングURLを追加（オプション）

### 16. バージョン情報
- [ ] バージョン番号を決定（1.0の維持を推奨）
- [ ] 必要に応じてビルド番号を更新
- [ ] リリースノートを準備

### 17. レビュー情報
- [ ] 必要に応じてデモアカウントを提供（このアプリでは不要）
- [ ] プレミアム機能についてレビュアーへのメモを追加
- [ ] アプリが完全にオフラインで動作することを指定

## 🚀 申請後のタスク

### 18. レビュープロセスの監視
- [ ] レビュアーのフィードバックをチェック
- [ ] 問題に迅速に対応する準備
- [ ] 一般的なリジェクト理由の修正を準備

### 19. ローンチの準備
- [ ] 発表戦略を計画
- [ ] カスタマーサポートチャンネルを設定
- [ ] クラッシュレポートとユーザーフィードバックを監視
- [ ] ユーザーリクエスト機能を含む最初のアップデートを準備

## ⏱ 推定タイムライン

**1-2日目**: 重要タスク（AdMob、アイコン、起動画面、プライバシー）  
**3日目**: App Store Connect設定とサブスクリプション設定  
**4日目**: コードクリーンアップとテスト  
**5日目**: スクリーンショット作成と説明文作成  
**6日目**: 最終テストと申請  

## 🎯 優先順位

1. **申請前に必須**:
   - AdMob本番ID
   - アプリアイコン
   - 起動画面
   - プライバシーマニフェスト
   - プライバシーポリシーの連絡先情報
   - 利用規約

2. **プロフェッショナルな申請のために推奨**:
   - デバッグUIの削除
   - コードのクリーンアップ
   - 徹底的なテスト
   - 高品質なスクリーンショット

3. **申請後でも可能**:
   - 追加のマーケティング資料
   - ウェブサイト作成
   - ソーシャルメディアプレゼンス

## 📝 注意事項

- CLAUDE.mdのopencv2.framework削除に関する注記を念頭に置く
- アプリはすでに複数言語にローカライズされているのはプラス点
- サブスクリプション実装は完了しており、StoreKit 2のベストプラクティスに従っている
- パブリックリリース前にTestFlightでベータテストの設定を検討

このロードマップにより、BodyLapseアプリがすべてのApp Store要件を満たし、レビュアーとユーザーの両方にプロフェッショナルに提示されることを保証します。